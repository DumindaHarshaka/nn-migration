<div class="green-ex-container"> <div class="side-bar"><div class="search"><form><input type="text" placeholder="Search the green exchange" ng-model="search_text"/><input type="submit" name="name" value="Search" ng-click="search()"/></form></div><hr/><div ng-hide="isLoggedIn()" class="sign-up"><a href="#" ng-click="signUpCollapse()"><div class="img"><img src="/images/nn-round-line.svg" alt="" height="80px" width="80px"/></div><div class="text"> <h1>Sign Up Here</h1><p>Start exchanging, it's free.</p></div></a><div ng-class="isSignUpCollapse ? 'collapse' : ''" class="signup-form"><form name="authform.signUpForm" ng-submit="signUp()"><label>Name <span>*</span></label><input type="text" name="fname" placeholder="First name" ng-model="user.first_name" ng-class="{ 'has-error' : authform.signUpForm.fname.$invalid &amp;&amp; !authform.signUpForm.fname.$pristine }" required="required"/><label>Email <span>*</span></label><input type="email" name="email" placeholder="Email address" ng-model="user.email" ng-class="{ 'has-error' : authform.signUpForm.email.$invalid &amp;&amp; !authform.signUpForm.email.$pristine }" required="required"/><div ng-show="duplicate_email" class="error"><div class="text"><p>Duplicate email address. Please enter another email address.  </p></div></div><label>Password <span>*</span></label><input type="password" name="pass" placeholder="Password" ng-model="user.password" ng-class="{ 'has-error' : authform.signUpForm.pass.$invalid &amp;&amp; !authform.signUpForm.pass.$pristine }" required="required"/><label>Repeat password <span>*</span></label><input type="password" name="rpass" placeholder="Repeat password" ng-model="user.repeat_password" ng-class="{ 'has-error' : authform.signUpForm.rpass.$invalid &amp;&amp; !authform.signUpForm.rpass.$pristine  }" required="required"/><div ng-show="!authform.signUpForm.rpass.$pristine &amp;&amp; (user.password !== user.repeat_password)" class="error"><div class="text"><p>Passwords should match.</p></div></div><label class="guid"><span>* </span><span>Fields are required.</span></label><input type="submit" name="name" value="Sign up" ng-disabled="authform.signUpForm.$invalid || plant.plantLoading || (user.password !== user.repeat_password)"/><div class="terms"><div class="text"><p>By signing up, you agree to our<br><strong>Terms and Privacy Policy.</strong></p></div></div></form></div></div><div class="menu"> <ul><li><a href="#" ng-click="getAllPosts(); currentSidebarItem='all_plants'" ng-hide="" ng-class="isMenuItemActive('all_plants') ? 'active' : ''"> <div class="side-menu-item"><div class="icon"><img src="/images/responds.svg" alt="Post a new plant"/></div><div class="text"><h2>All plants</h2><p>Available for exchange</p></div></div></a></li><li ng-hide="!isLoggedIn()"> <a href="#" ng-click="doCollapse(); currentSidebarItem='post_plants'" ng-hide="" ng-class="isMenuItemActive('post_plants') ? 'active' : ''"> <div class="side-menu-item"><div class="icon"><img src="/images/responds.svg" alt="Post a new plant"/></div><div class="text"><h2>Post a new plant</h2><p>Start exchanging</p></div></div></a><div ng-class="collapse ? 'collapse' : ''" class="plant-info"><div class="post-type"><button type="button" name="button" ng-class="checkType('Exchange')" ng-click="typeTabClick('Exchange')">Exchange</button><button type="button" name="button" ng-class="checkType('Donation')" ng-click="typeTabClick('Donation')">Donate</button><button type="button" name="button" ng-class="checkType('Request')" ng-click="typeTabClick('Request')">Request</button></div><div class="form"><form name="pform.plantForm" ng-submit="submitForm()" novalidate="novalidate"><label>Plant name </label><input type="text" ng-model="plant.name" name="name" placeholder="Name of the plant" ng-class="{ 'has-error' : pform.plantForm.name.$invalid &amp;&amp; !pform.plantForm.name.$pristine }" required="required"/><label>Description</label><textarea name="description" ng-model="plant.description" id="description" rows="4" cols="40" placeholder="Description"></textarea><label>Quantity </label><input type="number" ng-model="plant.quantity" min="1" name="quantity" id="qty" placeholder="Number of plants" ng-class="{ 'has-error' : pform.plantForm.quantity.$invalid &amp;&amp; !pform.plantForm.quantity.$pristine }" required="required"/><label>Location </label><input places-auto-complete="places-auto-complete" size="80" ng-model="plant.address" component-restrictions="{country:'lk'}" types="{{types}}" on-place-changed="greenExchange.placeChanged()" ng-class="{ 'has-error' : pform.plantForm.location.$invalid &amp;&amp; !pform.plantForm.location.$pristine }" name="location" required="required"/><input type="submit" value="Post" ng-disabled="pform.plantForm.$invalid || plant.plantLoading"/><div ng-show="plant.plantLoading" class="loading"><img src="/images/ball.gif" alt="Wait.." height="30px" width="30px"/></div></form></div><div class="map"> <ng-map class="map">            </ng-map></div></div></li><li ng-hide="!isLoggedIn()"><a href="#" ng-click="getMyPlants(); currentSidebarItem='my_plants'" ng-hide="" ng-class="isMenuItemActive('my_plants') ? 'active' : ''"> <div class="side-menu-item"><div class="icon"><img src="/images/avatar.svg" alt="Post a new plant"/></div><div class="text"><h2>My plants</h2><p>View and edit my plants</p></div></div></a></li>
</ul></div><div class="filler"></div></div><div class="new-posts"><h1>{{posts.length}}</h1><p>posts</p></div><div class="posts"><div ng-show="verify_email_notification" class="verify_email_notification"><h1><i class="fa fa-check" aria-hidden="true"></i> Your are almost ready</h1><p>You are successfully signed up with Nature Nurture</p><div class="notification"> <p class="important">Please check your inbox and verify your email address.</p><p>We have sent you a verification email to the email address you provided and it should be in your inbox shortly.</p></div></div><div ng-repeat="post in posts" class="post"><div class="owner"><div class="image"><img src="/images/avatar.svg" class="img"/></div><div class="details"><h2 class="name"> {{post.owner.name}}</h2><p class="action">has posted a new plant on <span id="marketplace"> <strong>Green Exchange</strong></span></p><p class="date">{{post.createdAt | date:"MM/dd/yyyy 'at' h:mma"}}</p></div></div><div class="o-divider"> </div><div class="item"><span class="type">{{post.responses.length}} Response{{post.responses.length == 1 ? '':'s'}}</span><span ng-class="getPostType(post.type).toLowerCase()" class="type">{{post.type}}</span><div class="image"><img src="/images/plant.png"/></div><div class="details"><span ng-hide="post.editing || post.prompt_delete || post.prompt_close"><h3 class="name">{{post.name}}</h3><p class="status">{{post.address}}</p><p class="discription">{{post.description}}</p><p class="discription">Number of plants: {{post.quantity}}</p>
</span><div ng-show="post.editing" class="form"><form name="pform.editForm" ng-submit="submitEditForm(post)" novalidate="novalidate"><label>Plant name </label><input type="text" ng-model="post.shadow.name" name="name" placeholder="Name of the plant" ng-class="{ 'has-error' : pform.editForm.name.$invalid &amp;&amp; !pform.editForm.name.$pristine }" required="required"/><label>Description</label><input type="text" name="description" ng-model="post.shadow.description" id="description" placeholder="Description"/><label>Quantity </label><input type="number" ng-model="post.shadow.quantity" min="1" name="quantity" id="qty" placeholder="Number of plants" ng-class="{ 'has-error' : pform.editForm.quantity.$invalid &amp;&amp; !pform.editForm.quantity.$pristine }" required="required"/><label>Location </label><input places-auto-complete="places-auto-complete" size="80" ng-model="post.shadow.address" component-restrictions="{country:'lk'}" types="{{types}}" on-place-changed="greenExchange.placeChanged()" ng-class="{ 'has-error' : pform.editForm.location.$invalid &amp;&amp; !pform.editForm.location.$pristine }" name="location" required="required"/><div class="buttons"><input type="submit" value="Done" ng-disabled=" post.shadow.editInProgress"/><input type="button" value="Cancel" ng-disabled="post.shadow.editInProgress" ng-click="editCancel(post)"/><div ng-show="post.shadow.editInProgress" class="loading"><img src="/images/ball.gif" alt="Wait.." height="20px" width="20px"/></div></div></form></div><div ng-show="post.prompt_delete" class="prompt"><div class="message"><p class="info">You are about to delete this plant.</p><p>Are you sure you want to delete this plant? </p></div><div class="buttons"><button type="button" name="button" ng-click="deletePost(post)" class="yes">Yes</button><button type="button" name="button" ng-click="post.prompt_delete = false" class="no">No</button></div></div><div ng-show="post.prompt_close" class="prompt"><div class="message"><p class="info">You are about to mark this plant as closed.<br>That means you have completed the transactions on this item. </p><p>Are you sure you want to mark this plant as closed?</p></div><div class="buttons"><button type="button" name="button" ng-click="markAsClosed(post)" class="yes">Yes</button><button type="button" name="button" ng-click="post.prompt_close = false" class="no">No</button></div></div></div><div ng-hide="post.editing || post.prompt_delete || post.prompt_close" class="controles"><ul><li ng-hide="isMyPost(post)"> <a href="#" ng-click="post.response_form_class = 'collapse'"> <i aria-hidden="true" class="fa fa-comment"></i><span> Respond</span></a></li><li ng-show="isMyPost(post) &amp;&amp; isLoggedIn()"><a href="#" ng-click="edit(post)"> <i aria-hidden="true" class="fa fa-pencil"></i><span> Edit</span></a></li><li ng-show="isMyPost(post) &amp;&amp; isLoggedIn()"><a href="#" ng-click="promptClose(post)"> <i aria-hidden="true" class="fa fa-check"> </i><span> Mark as closed</span></a></li><li>      <button ng-click="" class="trigger"> <i aria-hidden="true" class="fa fa-cog"></i></button><div class="menu"> <ul><li> <a href="#" ng-click="report(post)"><i aria-hidden="true" class="fa fa-ban"></i><span> Report item </span></a></li><li ng-show="isMyPost(post) &amp;&amp; isLoggedIn()"><a href="#" ng-click="promptDelete(post)"> <i aria-hidden="true" class="fa fa-trash-o"></i><span> Delete    </span></a></li></ul></div></li></ul></div></div><div ng-class="post.response_form_class" class="respond"><div ng-show="post.type === 'Exchange'" class="respond-form"><form name="post.exchangeResponseForm" ng-submit="submitResponse(post,post.exchangeResponseForm)" novalidate="novalidate">           <input type="text" ng-model="post.new_response.name" name="name" placeholder="Name of the plant" ng-class="{ 'has-error' : post.exchangeResponseForm.name.$invalid &amp;&amp; !post.exchangeResponseForm.name.$pristine }" required="required"/><input type="number" ng-model="post.new_response.quantity" min="1" name="quantity" id="qty" placeholder="Number of plants" ng-class="{ 'has-error' : post.exchangeResponseForm.quantity.$invalid &amp;&amp; !post.exchangeResponseForm.quantity.$pristine }" required="required"/><input places-auto-complete="places-auto-complete" size="80" ng-model="post.new_response.address" component-restrictions="{country:'lk'}" types="{{types}}" on-place-changed="greenExchange.placeChanged()" ng-class="{ 'has-error' : post.exchangeResponseForm.location.$invalid &amp;&amp; !post.exchangeResponseForm.location.$pristine }" name="location" required="required"/><input type="text" ng-model="post.new_response.contact_info" name="contact_info" placeholder="Contact number" ng-class="{ 'has-error' : post.exchangeResponseForm.contact_info.$invalid &amp;&amp; !post.exchangeResponseForm.contact_info.$pristine }" required="required"/><p>Please make sure the contact number is correct. </p><div class="break"> <input type="submit" value="Respond" ng-disabled="post.exchangeResponseForm.$invalid || post.responseLoading"/><div ng-show="post.responseLoading" class="loading"><img src="/images/ball.gif" alt="Wait.." height="30px" width="30px"/></div></div></form></div><div ng-show="post.type === 'Donation'" class="respond-form"><p>You can request these donated plants.</p><form name="post.donationResponseForm" ng-submit="submitResponse(post,post.donationResponseForm)" novalidate="novalidate">           <!--input(type="text",ng-model="post.new_response.name", name="name",placeholder="Name of the plant", ng-class="{ 'has-error' : post.donationResponseForm.name.$invalid && !post.donationResponseForm.name.$pristine }" required)--><input type="number" ng-model="post.new_response.quantity" min="1" name="quantity" id="qty" placeholder="Number of plants" ng-class="{ 'has-error' : post.donationResponseForm.quantity.$invalid &amp;&amp; !post.donationResponseForm.quantity.$pristine }" required="required"/><input places-auto-complete="places-auto-complete" size="80" ng-model="post.new_response.address" component-restrictions="{country:'lk'}" types="{{types}}" on-place-changed="greenExchange.placeChanged()" ng-class="{ 'has-error' : post.donationResponseForm.location.$invalid &amp;&amp; !post.donationResponseForm.location.$pristine }" name="location" required="required"/><input type="text" ng-model="post.new_response.contact_info" name="contact_info" placeholder="Contact number" ng-class="{ 'has-error' : post.donationResponseForm.contact_info.$invalid &amp;&amp; !post.donationResponseForm.contact_info.$pristine }" required="required"/><p>Please make sure the contact number is correct. </p><div class="break"> <input type="submit" value="Respond" ng-disabled="post.donationResponseForm.$invalid || post.responseLoading"/><div ng-show="post.responseLoading" class="loading"><img src="/images/ball.gif" alt="Wait.." height="30px" width="30px"/></div></div></form></div><div ng-show="post.type === 'Request'" class="respond-form"><p>You can provide this requested plant.</p><form name="post.requestResponseForm" ng-submit="submitResponse(post,post.requestResponseForm)" novalidate="novalidate">           <!--input(type="text",ng-model="post.new_response.name", name="name",placeholder="Name of the plant", ng-class="{ 'has-error' : post.requestResponseForm.name.$invalid && !post.requestResponseForm.name.$pristine }" required)--><input type="number" ng-model="post.new_response.quantity" min="1" name="quantity" id="qty" placeholder="Number of plants" ng-class="{ 'has-error' : post.requestResponseForm.quantity.$invalid &amp;&amp; !post.requestResponseForm.quantity.$pristine }" required="required"/><input places-auto-complete="places-auto-complete" size="80" ng-model="post.new_response.address" component-restrictions="{country:'lk'}" types="{{types}}" on-place-changed="greenExchange.placeChanged()" ng-class="{ 'has-error' : post.requestResponseForm.location.$invalid &amp;&amp; !post.requestResponseForm.location.$pristine }" name="location" required="required"/><input type="text" ng-model="post.new_response.contact_info" name="contact_info" placeholder="Contact number" ng-class="{ 'has-error' : post.requestResponseForm.contact_info.$invalid &amp;&amp; !post.requestResponseForm.contact_info.$pristine }" required="required"/><p>Please make sure the contact number is correct. </p><div class="break"> <input type="submit" value="Respond" ng-disabled="post.requestResponseForm.$invalid || post.responseLoading"/><div ng-show="post.responseLoading" class="loading"><img src="/images/ball.gif" alt="Wait.." height="30px" width="30px"/></div></div></form></div></div><div ng-show="post.responses.length &gt; 0" class="market-item-bids"> <ul class="bids-list"><li ng-repeat="res in post.responses" class="bid-item"><div class="bidder"><div class="image"><img src="/images/avatar.svg"/></div></div><div class="details"><h3 class="name">{{res.response.owner.name}} <small class="action">{{(post.type === 'Exchange' || post.type === 'Donation')?(post.type === 'Exchange'? 'has bid on this plant with':'has requested'):'is willing to provide' }} </small><span>{{res.response.quantity}} {{res.response.name}} plant{{res.response.quantity == 1 ? '' : 's'}}</span></h3><!--h3.value --><p class="discription">{{res.response.createdAt | date:"MM/dd/yyyy 'at' h:mma"}} <span ng-show="isMyPost(post)">from <strong>{{res.response.address}}</strong></span></p></div><div ng-show="isMyPost(post)" class="contact-info"><button type="button" name="button" ng-click="getContactInfo(res)" ng-class="res.contact_info ? 'reveal' : ''"> <span ng-hide="res.contact_info">Show contact info </span><span ng-show="res.contactLoading"><img src="/images/ball.gif" alt="Wait.." height="10px" width="10px"/></span><span ng-show="res.contact_info">Contact info: {{res.contact_info}}</span></button></div></li></ul></div></div></div></div><!--script(type="application/javascript",src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCO13QjFKNU_2w0aCcwqJV5vymDjr5OVY&libraries=places&callback=initAutocomplete" async defer)-->